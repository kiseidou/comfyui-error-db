---
title: "【ComfyUI】Add Support For Z Image Loras Trained Using ModelScope - Civision"
description: "ComfyUIのエラー 'Add Support For Z Image Loras Trained Using ModelScope - Civision' の解決策まとめ。Python環境やカスタムノードの不具合を直す方法。"
pubDate: "2026-01-13"
---

## エラーの概要
Z-Image LoRAs（https://modelscope.ai/civision/models）からダウンロードしたモデルを使用しようとした際、ComfyUIで効果が得られないエラーが発生します。LoRAの適用結果に変化が見られず、画像生成時には期待される影響がありません。

## 原因
Z-Image LoRAsは特定の構造を持っており、ComfyUIの既存のノードでは適切に対応できていない可能性があります。また、そのLoRAモデルとComfyUI間での互換性の問題も原因として挙げられます。

## 解決策
### ステップ1: 修正スクリプトのインストール
ModelScopeでユーザーが提出した修正スクリプトをインストールします。このスクリプトはLoRAモデルのレイヤー名を適切に変換し、ComfyUIと互換性を持たせます。

1. 下記URLから`renamelayers.py`をダウンロード：
   ```
   https://www.modelscope.ai/models/scruffynerf/NinaPaley/file/view/master/renamelayers.py?status=1
   ```

2. ダウンロードしたスクリプトをPythonのライブラリパスにコピーします。通常は以下のディレクトリー：
   ```
   ~/.comfyui/loras/
   ```

3. Pythonで`renamelayers.py`をインポートし、LoRAモデルに対して実行します。
   ```python
   from renamelayers import rename_layers

   # モデルのパス指定
   model_path = "/path/to/your/z-image-lora.safetensors"
   
   # 修正スクリプトの呼び出し
   renamed_model_path = rename_layers(model_path)
   ```

### ステップ2: ComfyUIカスタムノードの追加と設定
修正されたLoRAモデルをComfyUIで使用するには、以下の手順に従ってください。

1. [Custom Node] (カスタムノード) を追加します。
2. 修正した`renamed_model_path`を使用して[Load Checkpoint] (チェックポイント読み込み) ノードからモデルをロードします。
3. [Add LoRA] (LoRAの追加) ノードに修正されたモデルパスを設定します。

### ステップ3: エクスポートと実行
1. 作成したノード構築をエクスポートし、[Queue Prompt] (プロンプト実行) ノードで実行します。
2. 実行結果の品質が不十分な場合は、他のComfyUIノードを使用して補正を行うか、再度設定を見直すことを検討してください。

## まとめ
Z-Image LoRAsとの互換性問題を解決するためには、ModelScopeで公開された修正スクリプトを使用し、モデルの構造を適切に変更することが必要です。また、ComfyUI上でカスタムノードを正しく設定することで、LoRAの効果を得ることができます。

注意：スクリプトやエクスポートしたワークフローは定期的に更新される可能性があるため、最新の情報を確認してください。