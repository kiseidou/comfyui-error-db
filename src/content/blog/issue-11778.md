---
title: "【ComfyUI】fix(api-nodes): use a unique name for uploading audio files"
description: "ComfyUIのエラー 'fix(api-nodes): use a unique name for uploading audio files' の解決策まとめ。Python環境やカスタムノードの不具合を直す方法。"
pubDate: "2026-01-13"
---

## エラーの概要

このエラーは、複数のノードが同じオブジェクトに音声ファイルをアップロードしようとした場合に発生します。通常、ワークフロー内で同名のファイルが存在するときに問題が現れます。

## 原因

`upload_audio_to_comfyapi` 関数が `filename` パラメータを使用しなくなったことで、すべてのアップロードは一意な名称を持つファイルとして行われます。これにより、ワークフロー内の複数のノードが同じオブジェクトに音声ファイルをアップロードしようとした場合でも問題が解決されます。

## 解決策

### コマンドラインでの修正手順

1. Python環境で ComfyUI を更新します。
   ```
   pip install --upgrade comfyui
   ```

2. デプロイメントの再起動が必要な場合は、以下のようにサーバーを再起動します。
   ```
   systemctl restart comfyui-server
   ```

### ソースコードでの修正手順

`upload_audio_to_comfyapi` 関数を使用するカスタムノードの場合、以下の変更を行います。

1. `filename` パラメータの指定を削除します。
2. 必要に応じて一意なファイル名生成ロジックを追加します。

以下は修正の一例です：

```python
def upload_audio_to_comfyapi(file_path):
    import os
    from datetime import datetime
    
    # 一意なファイル名の作成
    unique_filename = f"{os.path.basename(file_path)}_{datetime.now().strftime('%Y%m%d_%H%M%S')}"
    
    # APIノードにアップロードするための一意な名称を設定
    return unique_filename, file_path
```

## まとめ

`fix(api-nodes): use a unique name for uploading audio files` エラーは、アップロードされる音声ファイルの命名が一意であることを保証することで解決します。これにより、ワークフロー内で複数のノードが同じオブジェクトにファイルをアップロードしようとする問題が解消されます。

Python環境の更新と必要に応じてカスタムノードの修正を行えば、このエラーはすぐに解決可能です。